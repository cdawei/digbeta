\section{Machine learning tasks}

Suppose we have $N$ playlists from $U$ users, let $P_u$ be the set of indices of playlists from user $u$.
Let $M$ denote the total number of songs that was played at least once in any of the $N$ playlists.


\paragraph{Playlist augmentation}

We formulate the task of playlist augmentation as either a \emph{classification} or \emph{bipartite ranking} problem ({\it multitask?}),
that is, for each song that is not in the given playlist, 
we predict whether it will be added to the given playlist.
This formulation is illustrated in Figure~\ref{fig:pla},
where rows represent songs (no specific order) and columns represent playlists (no specific order).
Further, columns with white colour represent playlists in training set, 
and columns with grey colour represent playlists that should be augmented (\ie test set).
If entry $(i, j)$ is \texttt{1} (or \texttt{0}), 
it means the $i$-th song is (or not) found in the $j$-th playlist, 
and a question mark \texttt{?} means that we do not know whether the $i$-th song is found in the $j$-th playlist.
As a remark, columns represent playlists in test set contain only \texttt{1} and \texttt{?} entries.

\input{fig_gen}


\paragraph{Song scoring}

The score of song $m$ in playlist $i$ from user $u$ is a linear form,
\begin{equation*}
\begin{aligned}
f(u, i, m) &= \bar\w_{u,i}^\top \x_m,
\end{aligned}
\end{equation*}
where $\x_m$ is a feature vector of song $m$ which contains audio features, song genre, and 
\begin{equation*}
\bar\w_{u,i} = \bv_u + \w_i + \mubm,
\end{equation*}
where $\bv_u$ is a weight vector specific to user $u$,
$\w_i$ is a weight vector specific to playlist $i$,
and $\mubm$ is a weight vector shared by all users.

Further, when recommending songs for user $u$, we can also utilise song popularity as well as the listening events of all other users as features,
if these are available at test time (\eg playlist augmentation), \ie
\begin{equation*}
\begin{aligned}
f(u, i, m) &= \bar\w_{u,i}^\top \phibm_{u,m},
\end{aligned}
\end{equation*}
where $\phibm_{u,m}$ is a new feature vector concatenating both $\x_m$ 
and the number of listening events by all users except $u$ with regards to song $m$.
