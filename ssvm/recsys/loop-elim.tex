% !TEX root=main.tex

An even simpler approach than the above greedy strategy is the following:
by default, return the standard Viterbi solution (Equation \ref{eqn:argmax});
if this solution has loops, then simply remove them.
Specifically, if the Viterbi solution is $( y_1, \ldots, y_l )$,
and $i$ is the first index where $y_i$ already appears in the subsequence $( y_1, \ldots, y_{i-1} )$,
then simply return the subsequence $( y_1, \ldots, y_{i-1} )$.

The above algorithm is guaranteed to return a path,
but has at least two detrimental features.
First, it returns a solution that violates the length constraint of the trajectory recommendation problem.
Second, if we restrict attention to the POIs $\{ y_1, \ldots, y_{i-1} \}$, it is unclear whether the original ordering of the subsequence is optimal.
The second point can be remedied, as we now see.
